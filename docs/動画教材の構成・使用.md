認証機能(Auth.js) - 現状通り
基本的なデザイン・コンポーネント - 先にUI基盤を整える
状態管理 (Zustand) - 現状通り
チャットフロー（基本機能のみ） - 無料プランで使える基本機能から
API通信の実装 - 現状通り
送信機能と表示機能 - 現状通り
データベースへの保存 - 現状通り
画面遷移 (/chat -> /chat/[conversationId]) - 現状通り
使用状況管理 (UsageStat) - Stripeの前に基本的な使用制限を実装
履歴機能の実装 - 現状通り
Stripeによるサブスクリプション機能 - 支払い機能
参照資料の表示(RAG) - 有料機能として追加
複数ファイルアップロード - 有料機能として追加
その他の高度な機能拡張 - 有料機能の追加

この順序のメリット:

基本UIを先に構築することで、以降の機能追加がスムーズになります
使用状況管理を早めに導入することで、無料/有料の区分けが明確になります
サブスクリプション機能の実装後に高度な機能を追加することで、「なぜ課金が必要か」が理解しやすくなります

## 無料/有料プランの機能切り分け提案

### 無料プラン (FREE)

月5回の会話制限
テキストのみのチャット機能
基本的な質問応答
短い会話履歴保存（最新10件まで）
シンプルなUIでの表示

### 有料プラン (PRO)

コンテンツ強化機能

参照資料の表示(RAG)機能
長い会話履歴の保存と検索
会話のエクスポート機能

マルチモーダル機能

複数ファイルのアップロードと分析
画像認識・分析機能

利用枠の拡大

月間制限なし（$8相当のトークン使用まで）
より長い入力文字数制限


初学者向け教材として、以下のように段階的な実装を進めると理解しやすくなります:

基本ステージ: 認証〜基本チャット機能までを実装し、無料プランの機能を完成させる
中間ステージ: 使用状況管理を実装し、制限を設ける
発展ステージ: サブスクリプションと高度な機能を実装

それぞれのステージの最後で動作するアプリケーションになっていれば、学習者はモチベーションを維持しながら段階的に学べます。特に初学者は「動くものが作れた」という達成感が重要です。
この順序と切り分けにより、初学者にとって「なぜサブスクリプションが必要か」「どの機能に価値があるか」というビジネス面の理解も深まり、より実践的な学びになると思います。

