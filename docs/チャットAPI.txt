ãƒãƒ£ãƒƒãƒˆã‚¢ãƒ—ãƒªAPI
ãƒãƒ£ãƒƒãƒˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã¯ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®æŒç¶šæ€§ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ãŠã‚Šã€ä»¥å‰ã®ãƒãƒ£ãƒƒãƒˆå±¥æ­´ã‚’å¿œç­”ã®ã‚³ãƒ³ãƒ†ã‚­ã‚¹ãƒˆã¨ã—ã¦ä½¿ç”¨ã§ãã¾ã™ã€‚ã“ã‚Œã¯ã€ãƒãƒ£ãƒƒãƒˆãƒœãƒƒãƒˆã‚„ã‚«ã‚¹ã‚¿ãƒãƒ¼ã‚µãƒ¼ãƒ“ã‚¹AIãªã©ã«é©ç”¨ã§ãã¾ã™ã€‚

ãƒ™ãƒ¼ã‚¹URL
ã‚³ãƒ¼ãƒ‰
https://api.dify.ai/v1

Copy
Copied!
èªè¨¼
ã‚µãƒ¼ãƒ“ã‚¹APIã¯API-Keyèªè¨¼ã‚’ä½¿ç”¨ã—ã¾ã™ã€‚ APIã‚­ãƒ¼ã®æ¼æ´©ã‚’é˜²ããŸã‚ã€APIã‚­ãƒ¼ã¯ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆå´ã§å…±æœ‰ã¾ãŸã¯ä¿å­˜ã›ãšã€ã‚µãƒ¼ãƒãƒ¼å´ã§ä¿å­˜ã™ã‚‹ã“ã¨ã‚’å¼·ããŠå‹§ã‚ã—ã¾ã™ã€‚

ã™ã¹ã¦ã®APIãƒªã‚¯ã‚¨ã‚¹ãƒˆã«ãŠã„ã¦ã€ä»¥ä¸‹ã®ã‚ˆã†ã«AuthorizationHTTPãƒ˜ãƒƒãƒ€ãƒ¼ã«APIã‚­ãƒ¼ã‚’å«ã‚ã¦ãã ã•ã„ï¼š

ã‚³ãƒ¼ãƒ‰
  Authorization: Bearer {API_KEY}


Copy
Copied!
POST
/chat-messages
ãƒãƒ£ãƒƒãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’é€ä¿¡
ãƒãƒ£ãƒƒãƒˆã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã«ãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’é€ä¿¡ã—ã¾ã™ã€‚

ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£
Name
query
Type
string
Description
ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›/è³ªå•å†…å®¹

Name
inputs
Type
object
Description
ã‚¢ãƒ—ãƒªã§å®šç¾©ã•ã‚ŒãŸã•ã¾ã–ã¾ãªå¤‰æ•°å€¤ã®å…¥åŠ›ã‚’è¨±å¯ã—ã¾ã™ã€‚ inputsãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã«ã¯è¤‡æ•°ã®ã‚­ãƒ¼/å€¤ãƒšã‚¢ãŒå«ã¾ã‚Œã€å„ã‚­ãƒ¼ã¯ç‰¹å®šã®å¤‰æ•°ã«å¯¾å¿œã—ã€å„å€¤ã¯ãã®å¤‰æ•°ã®ç‰¹å®šã®å€¤ã§ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯{}

Name
response_mode
Type
string
Description
å¿œç­”ã®è¿”å´ãƒ¢ãƒ¼ãƒ‰ã‚’æŒ‡å®šã—ã¾ã™ã€‚ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ãƒ¢ãƒ¼ãƒ‰ï¼š

streaming ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒ¢ãƒ¼ãƒ‰ï¼ˆæ¨å¥¨ï¼‰ã€SSEï¼ˆServer-Sent Eventsï¼‰ã‚’é€šã˜ã¦ã‚¿ã‚¤ãƒ—ãƒ©ã‚¤ã‚¿ãƒ¼ã®ã‚ˆã†ãªå‡ºåŠ›ã‚’å®Ÿè£…ã—ã¾ã™ã€‚
blocking ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°ãƒ¢ãƒ¼ãƒ‰ã€å®Ÿè¡Œå®Œäº†å¾Œã«çµæœã‚’è¿”ã—ã¾ã™ã€‚ï¼ˆãƒ—ãƒ­ã‚»ã‚¹ãŒé•·ã„å ´åˆã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆãŒä¸­æ–­ã•ã‚Œã‚‹å¯èƒ½æ€§ãŒã‚ã‚Šã¾ã™ï¼‰ Cloudflareã®åˆ¶é™ã«ã‚ˆã‚Šã€100ç§’å¾Œã«å¿œç­”ãŒãªã„å ´åˆã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆã¯ä¸­æ–­ã•ã‚Œã¾ã™ã€‚ æ³¨ï¼šã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆãƒ¢ãƒ¼ãƒ‰ã§ã¯ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°ãƒ¢ãƒ¼ãƒ‰ã¯ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã›ã‚“
Name
user
Type
string
Description
ãƒ¦ãƒ¼ã‚¶ãƒ¼è­˜åˆ¥å­ã€ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’å®šç¾©ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å†…ã§é–‹ç™ºè€…ã«ã‚ˆã£ã¦ä¸€æ„ã«å®šç¾©ã•ã‚Œã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

Name
conversation_id
Type
string
Description
ä¼šè©±IDã€ä»¥å‰ã®ãƒãƒ£ãƒƒãƒˆè¨˜éŒ²ã«åŸºã¥ã„ã¦ä¼šè©±ã‚’ç¶šã‘ã‚‹ã«ã¯ã€å‰ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®conversation_idã‚’æ¸¡ã™å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

Name
files
Type
array[object]
Description
ãƒ•ã‚¡ã‚¤ãƒ«ãƒªã‚¹ãƒˆã€ãƒ†ã‚­ã‚¹ãƒˆã®ç†è§£ã¨è³ªå•ã¸ã®å›ç­”ã‚’çµ„ã¿åˆã‚ã›ãŸãƒ•ã‚¡ã‚¤ãƒ«ï¼ˆç”»åƒï¼‰ã®å…¥åŠ›ã«é©ã—ã¦ãŠã‚Šã€ãƒ¢ãƒ‡ãƒ«ãŒãƒ“ã‚¸ãƒ§ãƒ³æ©Ÿèƒ½ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã‚‹å ´åˆã«ã®ã¿åˆ©ç”¨å¯èƒ½ã§ã™ã€‚

type (string) ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ã‚¿ã‚¤ãƒ—ï¼šimageï¼ˆç¾åœ¨ã¯ç”»åƒã‚¿ã‚¤ãƒ—ã®ã¿ã‚µãƒãƒ¼ãƒˆï¼‰
transfer_method (string) è»¢é€æ–¹æ³•ã€ç”»åƒURLã®å ´åˆã¯remote_url / ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã®å ´åˆã¯local_file
url (string) ç”»åƒURLï¼ˆè»¢é€æ–¹æ³•ãŒremote_urlã®å ´åˆï¼‰
upload_file_id (string) ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«IDã€äº‹å‰ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰APIã‚’é€šã˜ã¦å–å¾—ã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ï¼ˆè»¢é€æ–¹æ³•ãŒlocal_fileã®å ´åˆï¼‰
Name
auto_generate_name
Type
bool
Description
ã‚¿ã‚¤ãƒˆãƒ«ã‚’è‡ªå‹•ç”Ÿæˆã—ã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯trueã§ã™ã€‚ falseã«è¨­å®šã™ã‚‹ã¨ã€ä¼šè©±ã®ãƒªãƒãƒ¼ãƒ APIã‚’å‘¼ã³å‡ºã—ã€auto_generateã‚’trueã«è¨­å®šã™ã‚‹ã“ã¨ã§éåŒæœŸã‚¿ã‚¤ãƒˆãƒ«ç”Ÿæˆã‚’å®Ÿç¾ã§ãã¾ã™ã€‚

å¿œç­”
response_modeãŒãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°ã®å ´åˆã€CompletionResponseã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆã‚’è¿”ã—ã¾ã™ã€‚ response_modeãŒã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ã®å ´åˆã€ChunkCompletionResponseã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚’è¿”ã—ã¾ã™ã€‚

ChatCompletionResponse
å®Œå…¨ãªã‚¢ãƒ—ãƒªçµæœã‚’è¿”ã—ã¾ã™ã€‚Content-Typeã¯application/jsonã§ã™ã€‚

message_id (string) ä¸€æ„ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ID
conversation_id (string) ä¼šè©±ID
mode (string) ã‚¢ãƒ—ãƒªãƒ¢ãƒ¼ãƒ‰ã€chatã¨ã—ã¦å›ºå®š
answer (string) å®Œå…¨ãªå¿œç­”å†…å®¹
metadata (object) ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
usage (Usage) ãƒ¢ãƒ‡ãƒ«ä½¿ç”¨æƒ…å ±
retriever_resources (array[RetrieverResource]) å¼•ç”¨ã¨å¸°å±ãƒªã‚¹ãƒˆ
created_at (int) ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ä½œæˆã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã€ä¾‹ï¼š1705395332
ChunkChatCompletionResponse
ã‚¢ãƒ—ãƒªã«ã‚ˆã£ã¦å‡ºåŠ›ã•ã‚ŒãŸã‚¹ãƒˆãƒªãƒ¼ãƒ ãƒãƒ£ãƒ³ã‚¯ã‚’è¿”ã—ã¾ã™ã€‚Content-Typeã¯text/event-streamã§ã™ã€‚ å„ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒãƒ£ãƒ³ã‚¯ã¯data:ã§å§‹ã¾ã‚Šã€2ã¤ã®æ”¹è¡Œæ–‡å­—\n\nã§åŒºåˆ‡ã‚‰ã‚Œã¾ã™ã€‚ä»¥ä¸‹ã®ã‚ˆã†ã«è¡¨ç¤ºã•ã‚Œã¾ã™ï¼š

data: {"event": "message", "task_id": "900bbd43-dc0b-4383-a372-aa6e6c414227", "id": "663c5084-a254-4040-8ad3-51f2a3c1a77c", "answer": "Hi", "created_at": 1705398420}\n\n

Copy
Copied!
ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒãƒ£ãƒ³ã‚¯ã®æ§‹é€ ã¯eventã«å¿œã˜ã¦ç•°ãªã‚Šã¾ã™ï¼š

event: message LLMã¯ãƒ†ã‚­ã‚¹ãƒˆãƒãƒ£ãƒ³ã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¿”ã—ã¾ã™ã€‚ã¤ã¾ã‚Šã€å®Œå…¨ãªãƒ†ã‚­ã‚¹ãƒˆãŒãƒãƒ£ãƒ³ã‚¯å½¢å¼ã§å‡ºåŠ›ã•ã‚Œã¾ã™ã€‚
task_id (string) ã‚¿ã‚¹ã‚¯IDã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆè¿½è·¡ã¨ä»¥ä¸‹ã®Stop Generate APIã«ä½¿ç”¨
message_id (string) ä¸€æ„ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ID
conversation_id (string) ä¼šè©±ID
answer (string) LLMãŒè¿”ã—ãŸãƒ†ã‚­ã‚¹ãƒˆãƒãƒ£ãƒ³ã‚¯å†…å®¹
created_at (int) ä½œæˆã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã€ä¾‹ï¼š1705395332
event: agent_message LLMã¯ãƒ†ã‚­ã‚¹ãƒˆãƒãƒ£ãƒ³ã‚¯ã‚¤ãƒ™ãƒ³ãƒˆã‚’è¿”ã—ã¾ã™ã€‚ã¤ã¾ã‚Šã€ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆãŒæœ‰åŠ¹ãªå ´åˆã€å®Œå…¨ãªãƒ†ã‚­ã‚¹ãƒˆãŒãƒãƒ£ãƒ³ã‚¯å½¢å¼ã§å‡ºåŠ›ã•ã‚Œã¾ã™ï¼ˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ¢ãƒ¼ãƒ‰ã§ã®ã¿ã‚µãƒãƒ¼ãƒˆï¼‰
task_id (string) ã‚¿ã‚¹ã‚¯IDã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆè¿½è·¡ã¨ä»¥ä¸‹ã®Stop Generate APIã«ä½¿ç”¨
message_id (string) ä¸€æ„ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ID
conversation_id (string) ä¼šè©±ID
answer (string) LLMãŒè¿”ã—ãŸãƒ†ã‚­ã‚¹ãƒˆãƒãƒ£ãƒ³ã‚¯å†…å®¹
created_at (int) ä½œæˆã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã€ä¾‹ï¼š1705395332
event: tts_message TTSã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚¤ãƒ™ãƒ³ãƒˆã€ã¤ã¾ã‚ŠéŸ³å£°åˆæˆå‡ºåŠ›ã€‚å†…å®¹ã¯Mp3å½¢å¼ã®ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªãƒ–ãƒ­ãƒƒã‚¯ã§ã€base64æ–‡å­—åˆ—ã¨ã—ã¦ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚Œã¦ã„ã¾ã™ã€‚å†ç”Ÿæ™‚ã«ã¯ã€base64ã‚’ãƒ‡ã‚³ãƒ¼ãƒ‰ã—ã¦ãƒ—ãƒ¬ãƒ¼ãƒ¤ãƒ¼ã«å…¥åŠ›ã™ã‚‹ã ã‘ã§ã™ã€‚ï¼ˆã“ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã¯è‡ªå‹•å†ç”ŸãŒæœ‰åŠ¹ãªå ´åˆã«ã®ã¿åˆ©ç”¨å¯èƒ½ï¼‰
task_id (string) ã‚¿ã‚¹ã‚¯IDã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆè¿½è·¡ã¨ä»¥ä¸‹ã®åœæ­¢å¿œç­”ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«ä½¿ç”¨
message_id (string) ä¸€æ„ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ID
audio (string) éŸ³å£°åˆæˆå¾Œã®ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã€base64ãƒ†ã‚­ã‚¹ãƒˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã¨ã—ã¦ã‚¨ãƒ³ã‚³ãƒ¼ãƒ‰ã•ã‚Œã¦ãŠã‚Šã€å†ç”Ÿæ™‚ã«ã¯base64ã‚’ãƒ‡ã‚³ãƒ¼ãƒ‰ã—ã¦ãƒ—ãƒ¬ãƒ¼ãƒ¤ãƒ¼ã«å…¥åŠ›ã™ã‚‹ã ã‘ã§ã™
created_at (int) ä½œæˆã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã€ä¾‹ï¼š1705395332
event: tts_message_end TTSã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã‚¹ãƒˆãƒªãƒ¼ãƒ çµ‚äº†ã‚¤ãƒ™ãƒ³ãƒˆã€‚ã“ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’å—ä¿¡ã™ã‚‹ã¨ã€ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªã‚¹ãƒˆãƒªãƒ¼ãƒ ã®çµ‚äº†ã‚’ç¤ºã—ã¾ã™ã€‚
task_id (string) ã‚¿ã‚¹ã‚¯IDã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆè¿½è·¡ã¨ä»¥ä¸‹ã®åœæ­¢å¿œç­”ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã«ä½¿ç”¨
message_id (string) ä¸€æ„ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ID
audio (string) çµ‚äº†ã‚¤ãƒ™ãƒ³ãƒˆã«ã¯ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªãŒãªã„ãŸã‚ã€ã“ã‚Œã¯ç©ºã®æ–‡å­—åˆ—ã§ã™
created_at (int) ä½œæˆã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã€ä¾‹ï¼š1705395332
event: agent_thought ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®æ€è€ƒã€LLMã®æ€è€ƒã€ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—ã®å…¥åŠ›ã¨å‡ºåŠ›ã‚’å«ã¿ã¾ã™ï¼ˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆãƒ¢ãƒ¼ãƒ‰ã§ã®ã¿ã‚µãƒãƒ¼ãƒˆï¼‰
id (string) ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ€è€ƒIDã€å„åå¾©ã«ã¯ä¸€æ„ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ€è€ƒIDãŒã‚ã‚Šã¾ã™
task_id (string) (string) ã‚¿ã‚¹ã‚¯IDã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆè¿½è·¡ã¨ä»¥ä¸‹ã®Stop Generate APIã«ä½¿ç”¨
message_id (string) ä¸€æ„ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ID
position (int) ç¾åœ¨ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ€è€ƒã®ä½ç½®ã€å„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ã¯é †ç•ªã«è¤‡æ•°ã®æ€è€ƒãŒå«ã¾ã‚Œã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚
thought (string) LLMãŒè€ƒãˆã¦ã„ã‚‹ã“ã¨
observation (string) ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—ã‹ã‚‰ã®å¿œç­”
tool (string) å‘¼ã³å‡ºã•ã‚ŒãŸãƒ„ãƒ¼ãƒ«ã®ãƒªã‚¹ãƒˆã€;ã§åŒºåˆ‡ã‚‰ã‚Œã¾ã™
tool_input (string) ãƒ„ãƒ¼ãƒ«ã®å…¥åŠ›ã€JSONå½¢å¼ã€‚ä¾‹ï¼š{"dalle3": {"prompt": "a cute cat"}}ã€‚
created_at (int) ä½œæˆã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã€ä¾‹ï¼š1705395332
message_files (array[string]) message_fileã‚¤ãƒ™ãƒ³ãƒˆã‚’å‚ç…§
file_id (string) ãƒ•ã‚¡ã‚¤ãƒ«ID
conversation_id (string) ä¼šè©±ID
event: message_file ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚¡ã‚¤ãƒ«ã‚¤ãƒ™ãƒ³ãƒˆã€ãƒ„ãƒ¼ãƒ«ã«ã‚ˆã£ã¦æ–°ã—ã„ãƒ•ã‚¡ã‚¤ãƒ«ãŒä½œæˆã•ã‚Œã¾ã—ãŸ
id (string) ãƒ•ã‚¡ã‚¤ãƒ«ä¸€æ„ID
type (string) ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—ã€ç¾åœ¨ã¯"image"ã®ã¿è¨±å¯
belongs_to (string) æ‰€å±ã€ã“ã“ã§ã¯'assistant'ã®ã¿
url (string) ãƒ•ã‚¡ã‚¤ãƒ«ã®ãƒªãƒ¢ãƒ¼ãƒˆURL
conversation_id (string) ä¼šè©±ID
event: message_end ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸çµ‚äº†ã‚¤ãƒ™ãƒ³ãƒˆã€ã“ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’å—ä¿¡ã™ã‚‹ã¨ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãŒçµ‚äº†ã—ãŸã“ã¨ã‚’æ„å‘³ã—ã¾ã™ã€‚
task_id (string) ã‚¿ã‚¹ã‚¯IDã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆè¿½è·¡ã¨ä»¥ä¸‹ã®Stop Generate APIã«ä½¿ç”¨
message_id (string) ä¸€æ„ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ID
conversation_id (string) ä¼šè©±ID
metadata (object) ãƒ¡ã‚¿ãƒ‡ãƒ¼ã‚¿
usage (Usage) ãƒ¢ãƒ‡ãƒ«ä½¿ç”¨æƒ…å ±
retriever_resources (array[RetrieverResource]) å¼•ç”¨ã¨å¸°å±ãƒªã‚¹ãƒˆ
event: message_replace ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å†…å®¹ç½®æ›ã‚¤ãƒ™ãƒ³ãƒˆã€‚ å‡ºåŠ›å†…å®¹ã®ãƒ¢ãƒ‡ãƒ¬ãƒ¼ã‚·ãƒ§ãƒ³ãŒæœ‰åŠ¹ãªå ´åˆã€å†…å®¹ãŒãƒ•ãƒ©ã‚°ã•ã‚Œã‚‹ã¨ã€ã“ã®ã‚¤ãƒ™ãƒ³ãƒˆã‚’é€šã˜ã¦ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å†…å®¹ãŒäº‹å‰è¨­å®šã•ã‚ŒãŸè¿”ä¿¡ã«ç½®ãæ›ãˆã‚‰ã‚Œã¾ã™ã€‚
task_id (string) ã‚¿ã‚¹ã‚¯IDã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆè¿½è·¡ã¨ä»¥ä¸‹ã®Stop Generate APIã«ä½¿ç”¨
message_id (string) ä¸€æ„ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ID
conversation_id (string) ä¼šè©±ID
answer (string) ç½®æ›å†…å®¹ï¼ˆã™ã¹ã¦ã®LLMè¿”ä¿¡ãƒ†ã‚­ã‚¹ãƒˆã‚’ç›´æ¥ç½®æ›ï¼‰
created_at (int) ä½œæˆã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã€ä¾‹ï¼š1705395332
event: error ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒ—ãƒ­ã‚»ã‚¹ä¸­ã«ç™ºç”Ÿã—ãŸä¾‹å¤–ã¯ã‚¹ãƒˆãƒªãƒ¼ãƒ ã‚¤ãƒ™ãƒ³ãƒˆã®å½¢å¼ã§å‡ºåŠ›ã•ã‚Œã€ã‚¨ãƒ©ãƒ¼ã‚¤ãƒ™ãƒ³ãƒˆã‚’å—ä¿¡ã™ã‚‹ã¨ã‚¹ãƒˆãƒªãƒ¼ãƒ ãŒçµ‚äº†ã—ã¾ã™ã€‚
task_id (string) ã‚¿ã‚¹ã‚¯IDã€ãƒªã‚¯ã‚¨ã‚¹ãƒˆè¿½è·¡ã¨ä»¥ä¸‹ã®Stop Generate APIã«ä½¿ç”¨
message_id (string) ä¸€æ„ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ID
status (int) HTTPã‚¹ãƒ†ãƒ¼ã‚¿ã‚¹ã‚³ãƒ¼ãƒ‰
code (string) ã‚¨ãƒ©ãƒ¼ã‚³ãƒ¼ãƒ‰
message (string) ã‚¨ãƒ©ãƒ¼ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸
event: ping æ¥ç¶šã‚’ç¶­æŒã™ã‚‹ãŸã‚ã«10ç§’ã”ã¨ã«pingã‚¤ãƒ™ãƒ³ãƒˆãŒç™ºç”Ÿã—ã¾ã™ã€‚
ã‚¨ãƒ©ãƒ¼
404, ä¼šè©±ãŒå­˜åœ¨ã—ã¾ã›ã‚“
400, invalid_param, ç•°å¸¸ãªãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿å…¥åŠ›
400, app_unavailable, ã‚¢ãƒ—ãƒªæ§‹æˆãŒåˆ©ç”¨ã§ãã¾ã›ã‚“
400, provider_not_initialize, åˆ©ç”¨å¯èƒ½ãªãƒ¢ãƒ‡ãƒ«è³‡æ ¼æƒ…å ±æ§‹æˆãŒã‚ã‚Šã¾ã›ã‚“
400, provider_quota_exceeded, ãƒ¢ãƒ‡ãƒ«å‘¼ã³å‡ºã—ã‚¯ã‚©ãƒ¼ã‚¿ãŒä¸è¶³ã—ã¦ã„ã¾ã™
400, model_currently_not_support, ç¾åœ¨ã®ãƒ¢ãƒ‡ãƒ«ã¯åˆ©ç”¨ã§ãã¾ã›ã‚“
400, completion_request_error, ãƒ†ã‚­ã‚¹ãƒˆç”Ÿæˆã«å¤±æ•—ã—ã¾ã—ãŸ
500, å†…éƒ¨ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼
ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
POST
/chat-messages
curl -X POST 'https://api.dify.ai/v1/chat-messages' \
--header 'Authorization: Bearer {api_key}' \
--header 'Content-Type: application/json' \
--data-raw '{
    "inputs": {},
    "query": "What are the specs of the iPhone 13 Pro Max?",
    "response_mode": "streaming",
    "conversation_id": "",
    "user": "abc-123",
    "files": [
      {
        "type": "image",
        "transfer_method": "remote_url",
        "url": "https://cloud.dify.ai/logo/logo-site.png"
      }
    ]
}'

Copy
Copied!
ãƒ–ãƒ­ãƒƒã‚­ãƒ³ã‚°ãƒ¢ãƒ¼ãƒ‰
å¿œç­”
{
    "event": "message",
    "message_id": "9da23599-e713-473b-982c-4328d4f5c78a",
    "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2",
    "mode": "chat",
    "answer": "iPhone 13 Pro Maxã®ä»•æ§˜ã¯æ¬¡ã®ã¨ãŠã‚Šã§ã™:...",
    "metadata": {
        "usage": {
            "prompt_tokens": 1033,
            "prompt_unit_price": "0.001",
            "prompt_price_unit": "0.001",
            "prompt_price": "0.0010330",
            "completion_tokens": 128,
            "completion_unit_price": "0.002",
            "completion_price_unit": "0.001",
            "completion_price": "0.0002560",
            "total_tokens": 1161,
            "total_price": "0.0012890",
            "currency": "USD",
            "latency": 0.7682376249867957
        },
        "retriever_resources": [
            {
                "position": 1,
                "dataset_id": "101b4c97-fc2e-463c-90b1-5261a4cdcafb",
                "dataset_name": "iPhone",
                "document_id": "8dd1ad74-0b5f-4175-b735-7d98bbbb4e00",
                "document_name": "iPhone List",
                "segment_id": "ed599c7f-2766-4294-9d1d-e5235a61270a",
                "score": 0.98457545,
                "content": "\"Model\",\"Release Date\",\"Display Size\",\"Resolution\",\"Processor\",\"RAM\",\"Storage\",\"Camera\",\"Battery\",\"Operating System\"\n\"iPhone 13 Pro Max\",\"September 24, 2021\",\"6.7 inch\",\"1284 x 2778\",\"Hexa-core (2x3.23 GHz Avalanche + 4x1.82 GHz Blizzard)\",\"6 GB\",\"128, 256, 512 GB, 1TB\",\"12 MP\",\"4352 mAh\",\"iOS 15\""
            }
        ]
    },
    "created_at": 1705407629
}

Copy
Copied!
ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒ¢ãƒ¼ãƒ‰ï¼ˆåŸºæœ¬ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆï¼‰
å¿œç­”
  data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " I", "created_at": 1679586595}
  data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": "'m", "created_at": 1679586595}
  data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " glad", "created_at": 1679586595}
  data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " to", "created_at": 1679586595}
  data: {"event": "message", "message_id": : "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " meet", "created_at": 1679586595}
  data: {"event": "message", "message_id": : "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " you", "created_at": 1679586595}
  data: {"event": "message_end", "id": "5e52ce04-874b-4d27-9045-b3bc80def685", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "metadata": {"usage": {"prompt_tokens": 1033, "prompt_unit_price": "0.001", "prompt_price_unit": "0.001", "prompt_price": "0.0010330", "completion_tokens": 135, "completion_unit_price": "0.002", "completion_price_unit": "0.001", "completion_price": "0.0002700", "total_tokens": 1168, "total_price": "0.0013030", "currency": "USD", "latency": 1.381760165997548}, "retriever_resources": [{"position": 1, "dataset_id": "101b4c97-fc2e-463c-90b1-5261a4cdcafb", "dataset_name": "iPhone", "document_id": "8dd1ad74-0b5f-4175-b735-7d98bbbb4e00", "document_name": "iPhone List", "segment_id": "ed599c7f-2766-4294-9d1d-e5235a61270a", "score": 0.98457545, "content": "\"Model\",\"Release Date\",\"Display Size\",\"Resolution\",\"Processor\",\"RAM\",\"Storage\",\"Camera\",\"Battery\",\"Operating System\"\n\"iPhone 13 Pro Max\",\"September 24, 2021\",\"6.7 inch\",\"1284 x 2778\",\"Hexa-core (2x3.23 GHz Avalanche + 4x1.82 GHz Blizzard)\",\"6 GB\",\"128, 256, 512 GB, 1TB\",\"12 MP\",\"4352 mAh\",\"iOS 15\""}]}}
  data: {"event": "tts_message", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": "qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"}
  data: {"event": "tts_message_end", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": ""}

Copy
Copied!
å¿œç­”ä¾‹ï¼ˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆï¼‰
å¿œç­”
data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " I", "created_at": 1679586595}
data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": "'m", "created_at": 1679586595}
data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " glad", "created_at": 1679586595}
data: {"event": "message", "message_id": "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " to", "created_at": 1679586595}
data: {"event": "message", "message_id": : "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " meet", "created_at": 1679586595}
data: {"event": "message", "message_id": : "5ad4cb98-f0c7-4085-b384-88c403be6290", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "answer": " you", "created_at": 1679586595}
data: {"event": "message_end", "id": "5e52ce04-874b-4d27-9045-b3bc80def685", "conversation_id": "45701982-8118-4bc5-8e9b-64562b4555f2", "metadata": {"usage": {"prompt_tokens": 1033, "prompt_unit_price": "0.001", "prompt_price_unit": "0.001", "prompt_price": "0.0010330", "completion_tokens": 135, "completion_unit_price": "0.002", "completion_price_unit": "0.001", "completion_price": "0.0002700", "total_tokens": 1168, "total_price": "0.0013030", "currency": "USD", "latency": 1.381760165997548}, "retriever_resources": [{"position": 1, "dataset_id": "101b4c97-fc2e-463c-90b1-5261a4cdcafb", "dataset_name": "iPhone", "document_id": "8dd1ad74-0b5f-4175-b735-7d98bbbb4e00", "document_name": "iPhone List", "segment_id": "ed599c7f-2766-4294-9d1d-e5235a61270a", "score": 0.98457545, "content": "\"Model\",\"Release Date\",\"Display Size\",\"Resolution\",\"Processor\",\"RAM\",\"Storage\",\"Camera\",\"Battery\",\"Operating System\"\n\"iPhone 13 Pro Max\",\"September 24, 2021\",\"6.7 inch\",\"1284 x 2778\",\"Hexa-core (2x3.23 GHz Avalanche + 4x1.82 GHz Blizzard)\",\"6 GB\",\"128, 256, 512 GB, 1TB\",\"12 MP\",\"4352 mAh\",\"iOS 15\""}]}}
data: {"event": "tts_message", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": "qqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqqq"}
data: {"event": "tts_message_end", "conversation_id": "23dd85f3-1a41-4ea0-b7a9-062734ccfaf9", "message_id": "a8bdc41c-13b2-4c18-bfd9-054b9803038c", "created_at": 1721205487, "task_id": "3bf8a0bb-e73b-4690-9e66-4e429bad8ee7", "audio": ""}

Copy
Copied!
POST
/files/upload
ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰
ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡æ™‚ã«ä½¿ç”¨ã™ã‚‹ãŸã‚ã®ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã—ã¾ã™ï¼ˆç¾åœ¨ã¯ç”»åƒã®ã¿ã‚µãƒãƒ¼ãƒˆï¼‰ã€‚ç”»åƒã¨ãƒ†ã‚­ã‚¹ãƒˆã®ãƒãƒ«ãƒãƒ¢ãƒ¼ãƒ€ãƒ«ç†è§£ã‚’å¯èƒ½ã«ã—ã¾ã™ã€‚ pngã€jpgã€jpegã€webpã€gifå½¢å¼ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã™ã€‚ ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã•ã‚ŒãŸãƒ•ã‚¡ã‚¤ãƒ«ã¯ç¾åœ¨ã®ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã¿ãŒä½¿ç”¨ã§ãã¾ã™ã€‚

ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£
ã“ã®ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã¯multipart/form-dataãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å¿…è¦ã¨ã—ã¾ã™ã€‚

file (File) å¿…é ˆ ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹ãƒ•ã‚¡ã‚¤ãƒ«ã€‚
user (string) å¿…é ˆ ãƒ¦ãƒ¼ã‚¶ãƒ¼è­˜åˆ¥å­ã€é–‹ç™ºè€…ã®ãƒ«ãƒ¼ãƒ«ã§å®šç¾©ã•ã‚Œã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å†…ã§ä¸€æ„ã§ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚
å¿œç­”
ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ãŒæˆåŠŸã™ã‚‹ã¨ã€ã‚µãƒ¼ãƒãƒ¼ã¯ãƒ•ã‚¡ã‚¤ãƒ«ã®IDã¨é–¢é€£æƒ…å ±ã‚’è¿”ã—ã¾ã™ã€‚

id (uuid) ID
name (string) ãƒ•ã‚¡ã‚¤ãƒ«å
size (int) ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºï¼ˆãƒã‚¤ãƒˆï¼‰
extension (string) ãƒ•ã‚¡ã‚¤ãƒ«æ‹¡å¼µå­
mime_type (string) ãƒ•ã‚¡ã‚¤ãƒ«ã®MIMEã‚¿ã‚¤ãƒ—
created_by (uuid) ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ID
created_at (timestamp) ä½œæˆã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã€ä¾‹ï¼š1705395332
ã‚¨ãƒ©ãƒ¼
400, no_file_uploaded, ãƒ•ã‚¡ã‚¤ãƒ«ãŒæä¾›ã•ã‚Œãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“
400, too_many_files, ç¾åœ¨ã¯1ã¤ã®ãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿å—ã‘ä»˜ã‘ã¾ã™
400, unsupported_preview, ãƒ•ã‚¡ã‚¤ãƒ«ã¯ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“
400, unsupported_estimate, ãƒ•ã‚¡ã‚¤ãƒ«ã¯æ¨å®šã‚’ã‚µãƒãƒ¼ãƒˆã—ã¦ã„ã¾ã›ã‚“
413, file_too_large, ãƒ•ã‚¡ã‚¤ãƒ«ãŒå¤§ãã™ãã¾ã™
415, unsupported_file_type, ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ãªã„æ‹¡å¼µå­ã€ç¾åœ¨ã¯ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆãƒ•ã‚¡ã‚¤ãƒ«ã®ã¿å—ã‘ä»˜ã‘ã¾ã™
503, s3_connection_failed, S3ã‚µãƒ¼ãƒ“ã‚¹ã«æ¥ç¶šã§ãã¾ã›ã‚“
503, s3_permission_denied, S3ã«ãƒ•ã‚¡ã‚¤ãƒ«ã‚’ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã™ã‚‹æ¨©é™ãŒã‚ã‚Šã¾ã›ã‚“
503, s3_file_too_large, ãƒ•ã‚¡ã‚¤ãƒ«ãŒS3ã®ã‚µã‚¤ã‚ºåˆ¶é™ã‚’è¶…ãˆã¦ã„ã¾ã™
500, å†…éƒ¨ã‚µãƒ¼ãƒãƒ¼ã‚¨ãƒ©ãƒ¼
ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹
ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
POST
/files/upload
curl -X POST 'https://api.dify.ai/v1/files/upload' \
--header 'Authorization: Bearer {api_key}' \
--form 'file=@localfile;type=image/[png|jpeg|jpg|webp|gif] \
--form 'user=abc-123'

Copy
Copied!
å¿œç­”ä¾‹
å¿œç­”
{
  "id": "72fa9618-8f89-4a37-9b33-7e1178a24a67",
  "name": "example.png",
  "size": 1024,
  "extension": "png",
  "mime_type": "image/png",
  "created_by": "6ad1ab0a-73ff-4ac1-b9e4-cdb312f71f13",
  "created_at": 1577836800,
}

Copy
Copied!
POST
/chat-messages/:task_id/stop
ç”Ÿæˆåœæ­¢
ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒ¢ãƒ¼ãƒ‰ã§ã®ã¿ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã¾ã™ã€‚

ãƒ‘ã‚¹
task_id (string) ã‚¿ã‚¹ã‚¯IDã€ã‚¹ãƒˆãƒªãƒ¼ãƒŸãƒ³ã‚°ãƒãƒ£ãƒ³ã‚¯ã®è¿”ã‚Šå€¤ã‹ã‚‰å–å¾—ã§ãã¾ã™
ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£
user (string) å¿…é ˆ ãƒ¦ãƒ¼ã‚¶ãƒ¼è­˜åˆ¥å­ã€ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’å®šç¾©ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã€ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸é€ä¿¡ã‚¤ãƒ³ã‚¿ãƒ¼ãƒ•ã‚§ãƒ¼ã‚¹ã§æ¸¡ã•ã‚ŒãŸãƒ¦ãƒ¼ã‚¶ãƒ¼ã¨ä¸€è‡´ã—ã¦ã„ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚
å¿œç­”
result (string) å¸¸ã«"success"ã‚’è¿”ã—ã¾ã™
ãƒªã‚¯ã‚¨ã‚¹ãƒˆä¾‹
ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
POST
/chat-messages/:task_id/stop
curl -X POST 'https://api.dify.ai/v1/chat-messages/:task_id/stop' \
-H 'Authorization: Bearer {api_key}' \
-H 'Content-Type: application/json' \
--data-raw '{"user": "abc-123"}'

Copy
Copied!
å¿œç­”ä¾‹
å¿œç­”
{
  "result": "success"
}

Copy
Copied!
POST
/messages/:message_id/feedbacks
ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯
ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¯ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’æä¾›ã§ãã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³é–‹ç™ºè€…ãŒæœŸå¾…ã•ã‚Œã‚‹å‡ºåŠ›ã‚’æœ€é©åŒ–ã™ã‚‹ã®ã«å½¹ç«‹ã¡ã¾ã™ã€‚

ãƒ‘ã‚¹
Name
message_id
Type
string
Description
ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ID

ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£
Name
rating
Type
string
Description
ã‚¢ãƒƒãƒ—ãƒœãƒ¼ãƒˆã¯likeã€ãƒ€ã‚¦ãƒ³ãƒœãƒ¼ãƒˆã¯dislikeã€ã‚¢ãƒƒãƒ—ãƒœãƒ¼ãƒˆã®å–ã‚Šæ¶ˆã—ã¯null

Name
user
Type
string
Description
ãƒ¦ãƒ¼ã‚¶ãƒ¼è­˜åˆ¥å­ã€é–‹ç™ºè€…ã®ãƒ«ãƒ¼ãƒ«ã§å®šç¾©ã•ã‚Œã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å†…ã§ä¸€æ„ã§ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚

Name
content
Type
string
Description
ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯ã§ã™ã€‚

å¿œç­”
result (string) å¸¸ã«"success"ã‚’è¿”ã—ã¾ã™
ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
POST
/messages/:message_id/feedbacks
curl -X POST 'https://api.dify.ai/v1/messages/:message_id/feedbacks \
 --header 'Authorization: Bearer {api_key}' \
--header 'Content-Type: application/json' \
--data-raw '{
    "rating": "like",
    "user": "abc-123",
    "content": "message feedback information"
}'

Copy
Copied!
å¿œç­”
{
  "result": "success"
}

Copy
Copied!
GET
/messages/{message_id}/suggested
æ¬¡ã®æ¨å¥¨è³ªå•
ç¾åœ¨ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«å¯¾ã™ã‚‹æ¬¡ã®è³ªå•ã®ææ¡ˆã‚’å–å¾—ã—ã¾ã™

ãƒ‘ã‚¹ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
Name
message_id
Type
string
Description
ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ID

ã‚¯ã‚¨ãƒª
Name
user
Type
string
Description
ãƒ¦ãƒ¼ã‚¶ãƒ¼è­˜åˆ¥å­ã€ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’å®šç¾©ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã€çµ±è¨ˆã®ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å†…ã§é–‹ç™ºè€…ã«ã‚ˆã£ã¦ä¸€æ„ã«å®šç¾©ã•ã‚Œã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
GET
/messages/{message_id}/suggested
curl --location --request GET 'https://api.dify.ai/v1/messages/{message_id}/suggested?user=abc-123& \
--header 'Authorization: Bearer ENTER-YOUR-SECRET-KEY' \
--header 'Content-Type: application/json'

Copy
Copied!
å¿œç­”
{
  "result": "success",
  "data": [
        "a",
        "b",
        "c"
    ]
}

Copy
Copied!
GET
/messages
ä¼šè©±å±¥æ­´ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’å–å¾—
ã‚¹ã‚¯ãƒ­ãƒ¼ãƒ«ãƒ­ãƒ¼ãƒ‰å½¢å¼ã§éå»ã®ãƒãƒ£ãƒƒãƒˆè¨˜éŒ²ã‚’è¿”ã—ã€æœ€åˆã®ãƒšãƒ¼ã‚¸ã¯æœ€æ–°ã®{limit}ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’è¿”ã—ã¾ã™ã€‚ã¤ã¾ã‚Šã€é€†é †ã§ã™ã€‚

ã‚¯ã‚¨ãƒª
Name
conversation_id
Type
string
Description
ä¼šè©±ID

Name
user
Type
string
Description
ãƒ¦ãƒ¼ã‚¶ãƒ¼è­˜åˆ¥å­ã€ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’å®šç¾©ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã€çµ±è¨ˆã®ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å†…ã§é–‹ç™ºè€…ã«ã‚ˆã£ã¦ä¸€æ„ã«å®šç¾©ã•ã‚Œã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

Name
first_id
Type
string
Description
ç¾åœ¨ã®ãƒšãƒ¼ã‚¸ã®æœ€åˆã®ãƒãƒ£ãƒƒãƒˆè¨˜éŒ²ã®IDã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯nullã§ã™ã€‚

Name
limit
Type
int
Description
1å›ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§è¿”ã™ãƒãƒ£ãƒƒãƒˆå±¥æ­´ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®æ•°ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯20ã§ã™ã€‚

å¿œç­”
data (array[object]) ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒªã‚¹ãƒˆ
id (string) ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ID
conversation_id (string) ä¼šè©±ID
inputs (object) ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã€‚
query (string) ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›/è³ªå•å†…å®¹ã€‚
message_files (array[object]) ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ãƒ•ã‚¡ã‚¤ãƒ«
id (string) ID
type (string) ãƒ•ã‚¡ã‚¤ãƒ«ã‚¿ã‚¤ãƒ—ã€ç”»åƒã®å ´åˆã¯image
url (string) ãƒ—ãƒ¬ãƒ“ãƒ¥ãƒ¼ç”»åƒURL
belongs_to (string) æ‰€å±ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã¾ãŸã¯ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆ
agent_thoughts (array[object]) ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã®æ€è€ƒï¼ˆåŸºæœ¬ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆã®å ´åˆã¯ç©ºï¼‰
id (string) ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ€è€ƒIDã€å„åå¾©ã«ã¯ä¸€æ„ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ€è€ƒIDãŒã‚ã‚Šã¾ã™
message_id (string) ä¸€æ„ã®ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ID
position (int) ç¾åœ¨ã®ã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆæ€è€ƒã®ä½ç½®ã€å„ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã«ã¯é †ç•ªã«è¤‡æ•°ã®æ€è€ƒãŒå«ã¾ã‚Œã‚‹å ´åˆãŒã‚ã‚Šã¾ã™ã€‚
thought (string) LLMãŒè€ƒãˆã¦ã„ã‚‹ã“ã¨
observation (string) ãƒ„ãƒ¼ãƒ«å‘¼ã³å‡ºã—ã‹ã‚‰ã®å¿œç­”
tool (string) å‘¼ã³å‡ºã•ã‚ŒãŸãƒ„ãƒ¼ãƒ«ã®ãƒªã‚¹ãƒˆã€;ã§åŒºåˆ‡ã‚‰ã‚Œã¾ã™
tool_input (string) ãƒ„ãƒ¼ãƒ«ã®å…¥åŠ›ã€JSONå½¢å¼ã€‚ä¾‹ï¼š{"dalle3": {"prompt": "a cute cat"}}ã€‚
created_at (int) ä½œæˆã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã€ä¾‹ï¼š1705395332
message_files (array[string]) message_fileã‚¤ãƒ™ãƒ³ãƒˆã‚’å‚ç…§
file_id (string) ãƒ•ã‚¡ã‚¤ãƒ«ID
answer (string) å¿œç­”ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸å†…å®¹
created_at (timestamp) ä½œæˆã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã€ä¾‹ï¼š1705395332
feedback (object) ãƒ•ã‚£ãƒ¼ãƒ‰ãƒãƒƒã‚¯æƒ…å ±
rating (string) ã‚¢ãƒƒãƒ—ãƒœãƒ¼ãƒˆã¯like / ãƒ€ã‚¦ãƒ³ãƒœãƒ¼ãƒˆã¯dislike
retriever_resources (array[RetrieverResource]) å¼•ç”¨ã¨å¸°å±ãƒªã‚¹ãƒˆ
has_more (bool) æ¬¡ã®ãƒšãƒ¼ã‚¸ãŒã‚ã‚‹ã‹ã©ã†ã‹
limit (int) è¿”ã•ã‚ŒãŸã‚¢ã‚¤ãƒ†ãƒ ã®æ•°ã€å…¥åŠ›ãŒã‚·ã‚¹ãƒ†ãƒ åˆ¶é™ã‚’è¶…ãˆã‚‹å ´åˆã€ã‚·ã‚¹ãƒ†ãƒ åˆ¶é™ã®æ•°ã‚’è¿”ã—ã¾ã™
ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
GET
/messages
curl -X GET 'https://api.dify.ai/v1/messages?user=abc-123&conversation_id='\
 --header 'Authorization: Bearer {api_key}'

Copy
Copied!
å¿œç­”ä¾‹ï¼ˆåŸºæœ¬ã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆï¼‰
å¿œç­”
{
  "limit": 20,
  "has_more": false,
  "data": [
    {
        "id": "a076a87f-31e5-48dc-b452-0061adbbc922",
        "conversation_id": "cd78daf6-f9e4-4463-9ff2-54257230a0ce",
        "inputs": {
            "name": "dify"
        },
        "query": "iphone 13 pro",
        "answer": "iPhone 13 Proã¯2021å¹´9æœˆ24æ—¥ã«ç™ºå£²ã•ã‚Œã€6.1ã‚¤ãƒ³ãƒã®ãƒ‡ã‚£ã‚¹ãƒ—ãƒ¬ã‚¤ã¨1170 x 2532ã®è§£åƒåº¦ã‚’å‚™ãˆã¦ã„ã¾ã™ã€‚Hexa-core (2x3.23 GHz Avalanche + 4x1.82 GHz Blizzard)ãƒ—ãƒ­ã‚»ãƒƒã‚µã€6 GBã®RAMã‚’æ­è¼‰ã—ã€128 GBã€256 GBã€512 GBã€1 TBã®ã‚¹ãƒˆãƒ¬ãƒ¼ã‚¸ã‚ªãƒ—ã‚·ãƒ§ãƒ³ã‚’æä¾›ã—ã¾ã™ã€‚ã‚«ãƒ¡ãƒ©ã¯12 MPã€ãƒãƒƒãƒ†ãƒªãƒ¼å®¹é‡ã¯3095 mAhã§ã€iOS 15ã‚’æ­è¼‰ã—ã¦ã„ã¾ã™ã€‚",
        "message_files": [],
        "feedback": null,
        "retriever_resources": [
            {
                "position": 1,
                "dataset_id": "101b4c97-fc2e-463c-90b1-5261a4cdcafb",
                "dataset_name": "iPhone",
                "document_id": "8dd1ad74-0b5f-4175-b735-7d98bbbb4e00",
                "document_name": "iPhone List",
                "segment_id": "ed599c7f-2766-4294-9d1d-e5235a61270a",
                "score": 0.98457545,
                "content": "\"Model\",\"Release Date\",\"Display Size\",\"Resolution\",\"Processor\",\"RAM\",\"Storage\",\"Camera\",\"Battery\",\"Operating System\"\n\"iPhone 13 Pro Max\",\"September 24, 2021\",\"6.7 inch\",\"1284 x 2778\",\"Hexa-core (2x3.23 GHz Avalanche + 4x1.82 GHz Blizzard)\",\"6 GB\",\"128, 256, 512 GB, 1TB\",\"12 MP\",\"4352 mAh\",\"iOS 15\""
            }
        ],
        "agent_thoughts": [],
        "created_at": 1705569239,
    }
  ]
}

Copy
Copied!
å¿œç­”ä¾‹ï¼ˆã‚¨ãƒ¼ã‚¸ã‚§ãƒ³ãƒˆã‚¢ã‚·ã‚¹ã‚¿ãƒ³ãƒˆï¼‰
å¿œç­”
{
    "limit": 20,
    "has_more": false,
    "data": [
        {
            "id": "d35e006c-7c4d-458f-9142-be4930abdf94",
            "conversation_id": "957c068b-f258-4f89-ba10-6e8a0361c457",
            "inputs": {},
            "query": "draw a cat",
            "answer": "çŒ«ã®ç”»åƒã‚’ç”Ÿæˆã—ã¾ã—ãŸã€‚ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç¢ºèªã—ã¦ç”»åƒã‚’è¡¨ç¤ºã—ã¦ãã ã•ã„ã€‚",
            "message_files": [
                {
                    "id": "976990d2-5294-47e6-8f14-7356ba9d2d76",
                    "type": "image",
                    "url": "http://127.0.0.1:5001/files/tools/976990d2-5294-47e6-8f14-7356ba9d2d76.png?timestamp=1705988524&nonce=55df3f9f7311a9acd91bf074cd524092&sign=z43nMSO1L2HBvoqADLkRxr7Biz0fkjeDstnJiCK1zh8=",
                    "belongs_to": "assistant"
                }
            ],
            "feedback": null,
            "retriever_resources": [],
            "created_at": 1705988187,
            "agent_thoughts": [
                {
                    "id": "592c84cf-07ee-441c-9dcc-ffc66c033469",
                    "chain_id": null,
                    "message_id": "d35e006c-7c4d-458f-9142-be4930abdf94",
                    "position": 1,
                    "thought": "",
                    "tool": "dalle2",
                    "tool_input": "{\"dalle2\": {\"prompt\": \"cat\"}}",
                    "created_at": 1705988186,
                    "observation": "ç”»åƒã¯ã™ã§ã«ä½œæˆã•ã‚Œã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ã«é€ä¿¡ã•ã‚Œã¾ã—ãŸã€‚ä»Šã™ããƒ¦ãƒ¼ã‚¶ãƒ¼ã«ç¢ºèªã™ã‚‹ã‚ˆã†ã«ä¼ãˆã¦ãã ã•ã„ã€‚",
                    "message_files": [
                        "976990d2-5294-47e6-8f14-7356ba9d2d76"
                    ]
                },
                {
                    "id": "73ead60d-2370-4780-b5ed-532d2762b0e5",
                    "chain_id": null,
                    "message_id": "d35e006c-7c4d-458f-9142-be4930abdf94",
                    "position": 2,
                    "thought": "çŒ«ã®ç”»åƒã‚’ç”Ÿæˆã—ã¾ã—ãŸã€‚ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã‚’ç¢ºèªã—ã¦ç”»åƒã‚’è¡¨ç¤ºã—ã¦ãã ã•ã„ã€‚",
                    "tool": "",
                    "tool_input": "",
                    "created_at": 1705988199,
                    "observation": "",
                    "message_files": []
                }
            ]
        }
    ]
}

Copy
Copied!
GET
/conversations
ä¼šè©±ã‚’å–å¾—
ç¾åœ¨ã®ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ä¼šè©±ãƒªã‚¹ãƒˆã‚’å–å¾—ã—ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§æœ€æ–°ã®20ä»¶ã‚’è¿”ã—ã¾ã™ã€‚

ã‚¯ã‚¨ãƒª
Name
user
Type
string
Description
ãƒ¦ãƒ¼ã‚¶ãƒ¼è­˜åˆ¥å­ã€ã‚¨ãƒ³ãƒ‰ãƒ¦ãƒ¼ã‚¶ãƒ¼ã®ã‚¢ã‚¤ãƒ‡ãƒ³ãƒ†ã‚£ãƒ†ã‚£ã‚’å®šç¾©ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã€çµ±è¨ˆã®ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚ ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å†…ã§é–‹ç™ºè€…ã«ã‚ˆã£ã¦ä¸€æ„ã«å®šç¾©ã•ã‚Œã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

Name
last_id
Type
string
Description
(Optional)ç¾åœ¨ã®ãƒšãƒ¼ã‚¸ã®æœ€å¾Œã®ãƒ¬ã‚³ãƒ¼ãƒ‰ã®IDã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯nullã§ã™ã€‚

Name
limit
Type
int
Description
(Optional)1å›ã®ãƒªã‚¯ã‚¨ã‚¹ãƒˆã§è¿”ã™ãƒ¬ã‚³ãƒ¼ãƒ‰ã®æ•°ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯æœ€æ–°ã®20ä»¶ã§ã™ã€‚æœ€å¤§100ã€æœ€å°1ã€‚

Name
sort_by
Type
string
Description
(Optional)ã‚½ãƒ¼ãƒˆãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆï¼š-updated_atï¼ˆæ›´æ–°æ™‚é–“ã§é™é †ã«ã‚½ãƒ¼ãƒˆï¼‰

åˆ©ç”¨å¯èƒ½ãªå€¤ï¼šcreated_at, -created_at, updated_at, -updated_at
ãƒ•ã‚£ãƒ¼ãƒ«ãƒ‰ã®å‰ã®è¨˜å·ã¯é †åºã¾ãŸã¯é€†é †ã‚’è¡¨ã—ã€"-"ã¯é€†é †ã‚’è¡¨ã—ã¾ã™ã€‚
å¿œç­”
data (array[object]) ä¼šè©±ã®ãƒªã‚¹ãƒˆ
id (string) ä¼šè©±ID
name (string) ä¼šè©±åã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã§ã¯ã€ãƒ¦ãƒ¼ã‚¶ãƒ¼ãŒä¼šè©±ã§æœ€åˆã«å°‹ã­ãŸè³ªå•ã®ã‚¹ãƒ‹ãƒšãƒƒãƒˆã§ã™ã€‚
inputs (object) ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã€‚
introduction (string) ç´¹ä»‹
created_at (timestamp) ä½œæˆã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã€ä¾‹ï¼š1705395332
updated_at (timestamp) æ›´æ–°ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã€ä¾‹ï¼š1705395332
has_more (bool)
limit (int) è¿”ã•ã‚ŒãŸã‚¨ãƒ³ãƒˆãƒªã®æ•°ã€å…¥åŠ›ãŒã‚·ã‚¹ãƒ†ãƒ åˆ¶é™ã‚’è¶…ãˆã‚‹å ´åˆã€ã‚·ã‚¹ãƒ†ãƒ åˆ¶é™ã®æ•°ã‚’è¿”ã—ã¾ã™
ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
GET
/conversations
curl -X GET 'https://api.dify.ai/v1/conversations?user=abc-123&last_id=&limit=20' \
 --header 'Authorization: Bearer {api_key}'

Copy
Copied!
å¿œç­”
{
  "limit": 20,
  "has_more": false,
  "data": [
    {
      "id": "10799fb8-64f7-4296-bbf7-b42bfbe0ae54",
      "name": "æ–°ã—ã„ãƒãƒ£ãƒƒãƒˆ",
      "inputs": {
          "book": "book",
          "myName": "Lucy"
      },
      "status": "normal",
      "created_at": 1679667915,
      "updated_at": 1679667915
    },
    {
      "id": "hSIhXBhNe8X1d8Et"
      // ...
    }
  ]
}

Copy
Copied!
DELETE
/conversations/:conversation_id
ä¼šè©±ã‚’å‰Šé™¤
ä¼šè©±ã‚’å‰Šé™¤ã—ã¾ã™ã€‚

ãƒ‘ã‚¹
conversation_id (string) ä¼šè©±ID
ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£
Name
user
Type
string
Description
ãƒ¦ãƒ¼ã‚¶ãƒ¼è­˜åˆ¥å­ã€é–‹ç™ºè€…ã«ã‚ˆã£ã¦å®šç¾©ã•ã‚Œã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å†…ã§ä¸€æ„ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

å¿œç­”
result (string) å¸¸ã«"success"ã‚’è¿”ã—ã¾ã™
ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
DELETE
/conversations/:conversation_id
curl -X DELETE 'https://api.dify.ai/v1/conversations/:conversation_id' \
--header 'Authorization: Bearer {api_key}' \
--header 'Content-Type: application/json' \
--data-raw '{ 
 "user": "abc-123"
}'

Copy
Copied!
å¿œç­”
{
  "result": "success"
}

Copy
Copied!
POST
/conversations/:conversation_id/name
ä¼šè©±ã®åå‰ã‚’å¤‰æ›´
ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£
ã‚»ãƒƒã‚·ãƒ§ãƒ³ã®åå‰ã‚’å¤‰æ›´ã—ã¾ã™ã€‚ã‚»ãƒƒã‚·ãƒ§ãƒ³åã¯ã€è¤‡æ•°ã®ã‚»ãƒƒã‚·ãƒ§ãƒ³ã‚’ã‚µãƒãƒ¼ãƒˆã™ã‚‹ã‚¯ãƒ©ã‚¤ã‚¢ãƒ³ãƒˆã§ã®è¡¨ç¤ºã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

ãƒ‘ã‚¹
conversation_id (string) ä¼šè©±ID
Name
name
Type
string
Description
(Optional)ä¼šè©±ã®åå‰ã€‚ã“ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿ã¯ã€auto_generateãŒtrueã«è¨­å®šã•ã‚Œã¦ã„ã‚‹å ´åˆã€çœç•¥ã§ãã¾ã™ã€‚

Name
auto_generate
Type
bool
Description
(Optional)ã‚¿ã‚¤ãƒˆãƒ«ã‚’è‡ªå‹•ç”Ÿæˆã—ã¾ã™ã€‚ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯falseã§ã™ã€‚

Name
user
Type
string
Description
ãƒ¦ãƒ¼ã‚¶ãƒ¼è­˜åˆ¥å­ã€é–‹ç™ºè€…ã«ã‚ˆã£ã¦å®šç¾©ã•ã‚Œã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å†…ã§ä¸€æ„ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

å¿œç­”
id (string) ä¼šè©±ID
name (string) ä¼šè©±å
inputs (object) ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
status (string) ä¼šè©±çŠ¶æ…‹
introduction (string) ç´¹ä»‹
created_at (timestamp) ä½œæˆã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã€ä¾‹ï¼š1705395332
updated_at (timestamp) æ›´æ–°ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ã€ä¾‹ï¼š1705395332
ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
POST
/conversations/:conversation_id/name
curl -X POST 'https://api.dify.ai/v1/conversations/:conversation_id/name' \
--header 'Authorization: Bearer {api_key}' \
--header 'Content-Type: application/json' \
--data-raw '{ 
 "name": "", 
 "auto_generate": true, 
 "user": "abc-123"
}'

Copy
Copied!
å¿œç­”
{
    "id": "cd78daf6-f9e4-4463-9ff2-54257230a0ce",
    "name": "Chat vs AI",
    "inputs": {},
    "introduction": "",
    "created_at": 1705569238,
    "updated_at": 1705569238
}

Copy
Copied!
POST
/audio-to-text
éŸ³å£°ã‹ã‚‰ãƒ†ã‚­ã‚¹ãƒˆã¸
ã“ã®ã‚¨ãƒ³ãƒ‰ãƒã‚¤ãƒ³ãƒˆã¯multipart/form-dataãƒªã‚¯ã‚¨ã‚¹ãƒˆã‚’å¿…è¦ã¨ã—ã¾ã™ã€‚

ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£
Name
file
Type
file
Description
ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªãƒ•ã‚¡ã‚¤ãƒ«ã€‚ ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹å½¢å¼ï¼š['mp3', 'mp4', 'mpeg', 'mpga', 'm4a', 'wav', 'webm'] ãƒ•ã‚¡ã‚¤ãƒ«ã‚µã‚¤ã‚ºåˆ¶é™ï¼š15MB

Name
user
Type
string
Description
ãƒ¦ãƒ¼ã‚¶ãƒ¼è­˜åˆ¥å­ã€é–‹ç™ºè€…ã®ãƒ«ãƒ¼ãƒ«ã§å®šç¾©ã•ã‚Œã€ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³å†…ã§ä¸€æ„ã§ãªã‘ã‚Œã°ãªã‚Šã¾ã›ã‚“ã€‚

å¿œç­”
text (string) å‡ºåŠ›ãƒ†ã‚­ã‚¹ãƒˆ
ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
POST
/audio-to-text
curl -X POST 'https://api.dify.ai/v1/audio-to-text' \
--header 'Authorization: Bearer {api_key}' \
--form 'file=@localfile;type=audio/[mp3|mp4|mpeg|mpga|m4a|wav|webm]'

Copy
Copied!
å¿œç­”
{
  "text": ""
}

Copy
Copied!
POST
/text-to-audio
ãƒ†ã‚­ã‚¹ãƒˆã‹ã‚‰éŸ³å£°ã¸
ãƒ†ã‚­ã‚¹ãƒˆã‚’éŸ³å£°ã«å¤‰æ›ã—ã¾ã™ã€‚

ãƒªã‚¯ã‚¨ã‚¹ãƒˆãƒœãƒ‡ã‚£
Name
message_id
Type
str
Description
Difyã«ã‚ˆã£ã¦ç”Ÿæˆã•ã‚ŒãŸãƒ†ã‚­ã‚¹ãƒˆãƒ¡ãƒƒã‚»ãƒ¼ã‚¸ã®å ´åˆã€ç”Ÿæˆã•ã‚ŒãŸãƒ¡ãƒƒã‚»ãƒ¼ã‚¸IDã‚’ç›´æ¥æ¸¡ã—ã¾ã™ã€‚ãƒãƒƒã‚¯ã‚¨ãƒ³ãƒ‰ã¯ãƒ¡ãƒƒã‚»ãƒ¼ã‚¸IDã‚’ä½¿ç”¨ã—ã¦å¯¾å¿œã™ã‚‹ã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã‚’æ¤œç´¢ã—ã€éŸ³å£°æƒ…å ±ã‚’ç›´æ¥åˆæˆã—ã¾ã™ã€‚message_idã¨textãŒåŒæ™‚ã«æä¾›ã•ã‚Œã‚‹å ´åˆã€message_idãŒå„ªå…ˆã•ã‚Œã¾ã™ã€‚

Name
text
Type
str
Description
éŸ³å£°ç”Ÿæˆã‚³ãƒ³ãƒ†ãƒ³ãƒ„ã€‚

Name
user
Type
string
Description
ãƒ¦ãƒ¼ã‚¶ãƒ¼è­˜åˆ¥å­ã€é–‹ç™ºè€…ã«ã‚ˆã£ã¦å®šç¾©ã•ã‚Œã€ã‚¢ãƒ—ãƒªå†…ã§ä¸€æ„ã§ã‚ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™ã€‚

ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
POST
/text-to-audio
curl --location --request POST 'https://api.dify.ai/v1/text-to-audio' \
--header 'Authorization: Bearer ENTER-YOUR-SECRET-KEY' \
--form 'text=Hello Dify;user=abc-123;message_id=5ad4cb98-f0c7-4085-b384-88c403be6290

Copy
Copied!
ãƒ˜ãƒƒãƒ€ãƒ¼
{
  "Content-Type": "audio/wav"
}

Copy
Copied!
GET
/info
ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®åŸºæœ¬æƒ…å ±ã‚’å–å¾—
ã“ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®åŸºæœ¬æƒ…å ±ã‚’å–å¾—ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™

Response
name (string) ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®åå‰
description (string) ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®èª¬æ˜
tags (array[string]) ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ã‚¿ã‚°
Request
GET
/info
curl -X GET 'https://api.dify.ai/v1/info' \
-H 'Authorization: Bearer {api_key}'

Copy
Copied!
Response
{
  "name": "My App",
  "description": "This is my app.",
  "tags": [
    "tag1",
    "tag2"
  ]
}

Copy
Copied!
GET
/parameters
ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿æƒ…å ±ã‚’å–å¾—
ãƒšãƒ¼ã‚¸ã«å…¥ã‚‹éš›ã«ã€æ©Ÿèƒ½ã€å…¥åŠ›ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿åã€ã‚¿ã‚¤ãƒ—ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤ãªã©ã®æƒ…å ±ã‚’å–å¾—ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™ã€‚

å¿œç­”
opening_statement (string) é–‹å§‹æ–‡
suggested_questions (array[string]) é–‹å§‹æ™‚ã®æ¨å¥¨è³ªå•ã®ãƒªã‚¹ãƒˆ
suggested_questions_after_answer (object) ç­”ãˆã‚’æœ‰åŠ¹ã«ã—ãŸå¾Œã®è³ªå•ã‚’ææ¡ˆã—ã¾ã™ã€‚
enabled (bool) æœ‰åŠ¹ã‹ã©ã†ã‹
speech_to_text (object) éŸ³å£°ã‹ã‚‰ãƒ†ã‚­ã‚¹ãƒˆã¸
enabled (bool) æœ‰åŠ¹ã‹ã©ã†ã‹
retriever_resource (object) å¼•ç”¨ã¨å¸°å±
enabled (bool) æœ‰åŠ¹ã‹ã©ã†ã‹
annotation_reply (object) æ³¨é‡ˆè¿”ä¿¡
enabled (bool) æœ‰åŠ¹ã‹ã©ã†ã‹
user_input_form (array[object]) ãƒ¦ãƒ¼ã‚¶ãƒ¼å…¥åŠ›ãƒ•ã‚©ãƒ¼ãƒ ã®æ§‹æˆ
text-input (object) ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«
label (string) å¤‰æ•°è¡¨ç¤ºãƒ©ãƒ™ãƒ«å
variable (string) å¤‰æ•°ID
required (bool) å¿…é ˆã‹ã©ã†ã‹
default (string) ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤
paragraph (object) æ®µè½ãƒ†ã‚­ã‚¹ãƒˆå…¥åŠ›ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«
label (string) å¤‰æ•°è¡¨ç¤ºãƒ©ãƒ™ãƒ«å
variable (string) å¤‰æ•°ID
required (bool) å¿…é ˆã‹ã©ã†ã‹
default (string) ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤
select (object) ãƒ‰ãƒ­ãƒƒãƒ—ãƒ€ã‚¦ãƒ³ã‚³ãƒ³ãƒˆãƒ­ãƒ¼ãƒ«
label (string) å¤‰æ•°è¡¨ç¤ºãƒ©ãƒ™ãƒ«å
variable (string) å¤‰æ•°ID
required (bool) å¿…é ˆã‹ã©ã†ã‹
default (string) ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆå€¤
options (array[string]) ã‚ªãƒ—ã‚·ãƒ§ãƒ³å€¤
file_upload (object) ãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰æ§‹æˆ
image (object) ç”»åƒè¨­å®š ç¾åœ¨ã‚µãƒãƒ¼ãƒˆã•ã‚Œã¦ã„ã‚‹ç”»åƒã‚¿ã‚¤ãƒ—ï¼špng, jpg, jpeg, webp, gif
enabled (bool) æœ‰åŠ¹ã‹ã©ã†ã‹
number_limits (int) ç”»åƒæ•°ã®åˆ¶é™ã€ãƒ‡ãƒ•ã‚©ãƒ«ãƒˆã¯3
transfer_methods (array[string]) è»¢é€æ–¹æ³•ã®ãƒªã‚¹ãƒˆã€remote_url, local_fileã€ã„ãšã‚Œã‹ã‚’é¸æŠã™ã‚‹å¿…è¦ãŒã‚ã‚Šã¾ã™
system_parameters (object) ã‚·ã‚¹ãƒ†ãƒ ãƒ‘ãƒ©ãƒ¡ãƒ¼ã‚¿
file_size_limit (int) ãƒ‰ã‚­ãƒ¥ãƒ¡ãƒ³ãƒˆã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚µã‚¤ã‚ºåˆ¶é™ï¼ˆMBï¼‰
image_file_size_limit (int) ç”»åƒãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚µã‚¤ã‚ºåˆ¶é™ï¼ˆMBï¼‰
audio_file_size_limit (int) ã‚ªãƒ¼ãƒ‡ã‚£ã‚ªãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚µã‚¤ã‚ºåˆ¶é™ï¼ˆMBï¼‰
video_file_size_limit (int) ãƒ“ãƒ‡ã‚ªãƒ•ã‚¡ã‚¤ãƒ«ã‚¢ãƒƒãƒ—ãƒ­ãƒ¼ãƒ‰ã‚µã‚¤ã‚ºåˆ¶é™ï¼ˆMBï¼‰
ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
GET
/parameters
 curl -X GET 'https://api.dify.ai/v1/parameters'

Copy
Copied!
å¿œç­”
{
  "opening_statement": "ã“ã‚“ã«ã¡ã¯ï¼",
  "suggested_questions_after_answer": {
      "enabled": true
  },
  "speech_to_text": {
      "enabled": true
  },
  "retriever_resource": {
      "enabled": true
  },
  "annotation_reply": {
      "enabled": true
  },
  "user_input_form": [
      {
          "paragraph": {
              "label": "ã‚¯ã‚¨ãƒª",
              "variable": "query",
              "required": true,
              "default": ""
          }
      }
  ],
  "file_upload": {
      "image": {
          "enabled": false,
          "number_limits": 3,
          "detail": "high",
          "transfer_methods": [
              "remote_url",
              "local_file"
          ]
      }
  },
  "system_parameters": {
      "file_size_limit": 15,
      "image_file_size_limit": 10,
      "audio_file_size_limit": 50,
      "video_file_size_limit": 100
  }
}

Copy
Copied!
GET
/meta
ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ¡ã‚¿æƒ…å ±ã‚’å–å¾—
ã“ã®ã‚¢ãƒ—ãƒªã‚±ãƒ¼ã‚·ãƒ§ãƒ³ã®ãƒ„ãƒ¼ãƒ«ã®ã‚¢ã‚¤ã‚³ãƒ³ã‚’å–å¾—ã™ã‚‹ãŸã‚ã«ä½¿ç”¨ã•ã‚Œã¾ã™

å¿œç­”
tool_icons(object[string]) ãƒ„ãƒ¼ãƒ«ã‚¢ã‚¤ã‚³ãƒ³
tool_name (string)
icon (object|string)
(object) ã‚¢ã‚¤ã‚³ãƒ³ã‚ªãƒ–ã‚¸ã‚§ã‚¯ãƒˆ
background (string) èƒŒæ™¯è‰²ï¼ˆ16é€²æ•°å½¢å¼ï¼‰
content(string) çµµæ–‡å­—
(string) ã‚¢ã‚¤ã‚³ãƒ³ã®URL
ãƒªã‚¯ã‚¨ã‚¹ãƒˆ
GET
/meta
curl -X GET 'https://api.dify.ai/v1/meta' \
-H 'Authorization: Bearer {api_key}'

Copy
Copied!
å¿œç­”
{
  "tool_icons": {
    "dalle2": "https://cloud.dify.ai/console/api/workspaces/current/tool-provider/builtin/dalle/icon",
    "api_tool": {
      "background": "#252525",
      "content": "ğŸ˜"
    }
  }
}